{"content":[{"type":"subheader","crDate":1683296223971,"chDate":1694510987511,"text":"Senden mit Formular"},{"type":"paragraph","crDate":1694510764198,"chDate":1694510873530,"text":"Das Hochladen von Dateien wird üblicherweise über ein Formular mit eingebettetem <i>file</i>-Inputfeld im Frontend erledigt. Der Aufbau eines solchen Formulars wird hier besprochen: <a href=\"/?id=19ngpvaphac\">Klick für mehr</a>"},{"type":"subheader","crDate":1694510963996,"chDate":1694510979969,"text":"Senden ohne Formular"},{"type":"paragraph","crDate":1694510996252,"chDate":1694522894466,"text":"Auch ohne ein Formular im DOM können Daten zusammengetragen und per <i>Formdata</i>-Objekt übertragen werden. Dazu wird ein Formdata-Objekt angelegt und beliebige Informationen per <i>append</i> angehängt. Dabei ist zu beachten, das alle Daten zur Übertragung in String konvertiert werden. Daher können keine Arrays, Objekte oder Funktionen direkt eingehängt werden."},{"type":"code","crDate":1694523125241,"chDate":1694523163118,"text":"const handleClick = () => {\n const myForm = new FormData();\n myForm.append('myText', 'SomeRandomText');\n\n fetch('/upload', {\n  method: 'post',\n  body: myForm\n }).then(\n  res => res.json()\n ).then(\n  console.log\n ).catch(\n  console.warn\n )\n}\n\nconst init = () => {\n document.querySelector('#btn')\n  .addEventListener('click', handleClick);\n}\n\n// INIT\ndocument.addEventListener('DOMContentLoaded', init);"},{"type":"paragraph","crDate":1694523239409,"chDate":1694524810993,"text":"Etwas komplizierter wird es, wenn Dateien hochgeladen werden sollen.\nEin Weg ist, die Dateien per <i>Ajax</i> zu laden, um auf deren Content zugreifen zu können. Dann wird die Datei zu einem <i>blob</i> (Binary Large Object) gewandelt, welches in das <i>Formdata</i>-Objekt angehängt werden kann."},{"type":"code","crDate":1694524859826,"chDate":1694525143841,"text":"const handleClick = () => {\n const imgURL = '/img/sample.pdf';\n const myForm = new FormData();\n myForm.append('myText', 'SomeRandomText');\n\n fetch(imgURL).then(\n  response => response.blob()\n ).then(blob => {\n  // extract Filename\n  let name = imgURL.split('/');\n  name = name[name.length - 1];\n\n  // Element anhängen\n  myForm.append('image', blob, name);\n\n  // Absenden\n  return fetch('/upload', {\n   method: 'post',\n   body: myForm\n  })\n }).then(\n  res => res.json()\n ).then(\n  console.log\n ).catch(\n  console.warn\n )\n}\n\nconst init = () => {\n  document.querySelector('#btn')\n   .addEventListener('click', handleClick);\n}\n\n// INIT\ndocument.addEventListener('DOMContentLoaded', init);"},{"type":"subheader","crDate":1683296235158,"chDate":1683296239877,"text":"Formidable"},{"type":"subheader","crDate":1683296241878,"chDate":1683296244884,"text":"Multer"}]}